require: slotfilling/slotFilling.sc
  module = sys.zb-common

patterns:

    $change = (—Å–º–µ–Ω–∏—Ç—å|–ø–æ–º–µ–Ω—è—Ç—å|–∑–∞–±—ã–ª*|–∏–∑–º–µ–Ω–∏—Ç—å|–ø–æ–ª—É—á–∏—Ç—å|–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å|–Ω–µ –ø–æ–º–Ω—é|–≥–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å|–≥–¥–µ –µ–≥–æ –Ω–∞–π—Ç–∏|–≤—Å–ø–æ–º–Ω–∏—Ç—å|—Å–±—Ä–æ—Å–∏—Ç—å|—É–∑–Ω–∞—Ç—å|—Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π|–º–µ–Ω—è—Ç—å|–∏–∑–º–µ–Ω–µ–Ω–∏–µ)
    $password = (~–ø–∞—Ä–æ–ª—å|–ø–∞—Ä–æ–ª*)
    $pin = (–ø–∏–Ω-–∫–æ–¥|–ø–∏–Ω –∫–æ–¥|–ø–∏–Ω–∫–æ–¥|–ø–∏–Ω*|*–ø–∏–Ω|*–ø–∏–Ω*|pin*|pin)
    $code = (*–∫–æ–¥|–∫–æ–¥|–∫–æ–¥*)

theme: /

    state: Start
        q!: $regex</start>
        a: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º —è –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å?
        intent: /–ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? || toState = "/ClarifyQuestion"
        event: noMatch || toState = "./"

    state: Bye
        intent!: /–ø–æ–∫–∞
        a: –ü—Ä–∏—è—Ç–Ω–æ –±—ã–ª–æ –ø–æ–æ–±—â–∞—Ç—å—Å—è. –í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å–Ω–æ–≤–∞ ÔÅä

    state: NoMatch
        event!: noMatch
        a: –Ø –Ω–µ –ø–æ–Ω—è–ª. –í—ã —Å–∫–∞–∑–∞–ª–∏: {{$request.query}}

    state: ClarifyQuestion
        q!: * $change * $code *
        q!: * $code * $password *
        q!: * $pin * $password *
        q!: * $change * $code * $password *
        q!: * $change * $pin * $password *
        q!: * $code
        a: –°–µ–π—á–∞—Å —Ä–∞—Å—Å–∫–∞–∂—É –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π.
                –í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å: 
                1. –ü–æ–º–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.  
                2. –ü–æ–º–µ–Ω—è—Ç—å PIN-–∫–æ–¥ –æ—Ç –∫–∞—Ä—Ç—ã.  
                –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ü–∏—Ñ—Ä—É –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–∞—à–µ–º—É –≤—ã–±–æ—Ä—É.
        buttons:
            "1" -> /ChangePassword
            "2" -> /ChangePIN
        intent: /1 || toState = "/ChangePassword"
        intent: /2 || toState = "/ChangePIN"
        event: noMatch || toState = "/Start"

    state: ChangePassword
        q!: * $change * $password *
        q!: * $password *
        a: –ß—Ç–æ–±—ã –ø–æ–º–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
            1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª –∏ –≤—ã–±–µ—Ä–∏—Ç–µ ¬´–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ¬ª.
            2. –í–≤–µ–¥–∏—Ç–µ SMS-–∫–æ–¥.
            3. –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –µ–≥–æ.
            –õ–∏–±–æ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–í—ã–π—Ç–∏" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
            –ü–æ—Å–ª–µ —á–µ–≥–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–Ω–æ–≤–æ –ø—Ä–æ–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é:
                1. –≤–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (–µ—Å–ª–∏ –æ—Ñ–æ—Ä–º–ª—è–ª–∏ —Ä–∞–Ω–µ–µ, –∏–Ω–∞—á–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è),
                2. —É–∫–∞–∑–∞—Ç—å –∫–æ–¥ –∏–∑ —Å–º—Å-–∫–æ–¥,
                3. –ø—Ä–∏–¥—É–º–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞.
        a: –ò –≤—Å–µ –≥–æ—Ç–æ–≤–æ!
            –ö–æ–¥ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. üôÇ
        event: noMatch || toState = "/Bye"

    state: ChangePIN
        q!: * $change * $pin *
        q!: * $pin *
        a: –ü–æ–º–µ–Ω—è—Ç—å PIN-–∫–æ–¥ –æ—Ç –∫–∞—Ä—Ç—ã –º–æ–∂–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
                1. –ù–∞ —ç–∫—Ä–∞–Ω–µ ¬´–ú–æ–∏ –¥–µ–Ω—å–≥–∏¬ª –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–ö–∞—Ä—Ç—ã¬ª –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—É—é.  
                2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª.  
                3. –ù–∞–∂–º–∏—Ç–µ ¬´–°–º–µ–Ω–∏—Ç—å PIN-–∫–æ–¥¬ª.  
                4. –í–≤–µ–¥–∏—Ç–µ —É–¥–æ–±–Ω—É—é –≤–∞–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—é.  
                5. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –µ–µ.
        a: –ò –≤—Å–µ –≥–æ—Ç–æ–≤–æ!
            PIN-–∫–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. üôÇ
        event: noMatch || toState = "/Bye"

    state: Match
        event!: match
        a: {{$context.intent.answer}}